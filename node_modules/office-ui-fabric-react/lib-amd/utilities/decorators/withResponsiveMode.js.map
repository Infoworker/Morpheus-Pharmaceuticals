{"version":3,"sources":["utilities/decorators/withResponsiveMode.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;IAQA,WAAY,cAAc;QACxB,qDAAS,CAAA;QACT,uDAAU,CAAA;QACV,qDAAS,CAAA;QACT,uDAAU,CAAA;QACV,yDAAW,CAAA;QACX,2DAAY,CAAA;IACd,CAAC,EAPW,sBAAc,KAAd,sBAAc,QAOzB;IAPD,IAAY,cAAc,GAAd,sBAOX,CAAA;IAED,IAAM,yBAAyB,GAAG;QAChC,GAAG;QACH,GAAG;QACH,IAAI;QACJ,IAAI;QACJ,IAAI;QACJ,QAAQ;KACT,CAAC;IAEF,IAAI,YAA4B,CAAC;IAEjC;;OAEG;IACH,2BAAkC,cAA8B;QAC9D,YAAY,GAAG,cAAc,CAAC;IAChC,CAAC;IAFe,yBAAiB,oBAEhC,CAAA;IAED,4BAAqF,iBAA4E;QAE/J,MAAM,CAAC;YAAiC,sCAA0C;YAEhF;gBACE,iBAAO,CAAC;gBACR,IAAI,CAAC,2BAA2B,GAAG,IAAI,CAAC,2BAA2B,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBAE/E,IAAI,CAAC,KAAK,GAAG;oBACX,cAAc,EAAE,IAAI,CAAC,kBAAkB,EAAE;iBAC1C,CAAC;YACJ,CAAC;YAEM,8CAAiB,GAAxB;gBAAA,iBAUC;gBATC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,MAAM,EAAE,QAAQ,EAAE;oBAChC,IAAI,cAAc,GAAG,KAAI,CAAC,kBAAkB,EAAE,CAAC;oBAE/C,EAAE,CAAC,CAAC,cAAc,KAAK,KAAI,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC,CAAC;wBACjD,KAAI,CAAC,QAAQ,CAAC;4BACZ,cAAc,EAAE,cAAc;yBAC/B,CAAC,CAAC;oBACL,CAAC;gBACH,CAAC,CAAC,CAAC;YACL,CAAC;YAEM,iDAAoB,GAA3B;gBACE,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;YACzB,CAAC;YAEM,mCAAM,GAAb;gBACQ,8CAAc,CAAgB;gBAEpC,MAAM,CAAC,CACL,oBAAC,iBAAiB,YAAC,GAAG,EAAG,IAAI,CAAC,2BAA6B,EAAC,cAAc,EAAG,cAAgB,GAAM,IAAI,CAAC,KAAK,EAAK,CACnH,CAAC;YACJ,CAAC;YAEO,+CAAkB,GAA1B;gBACE,IAAI,cAAc,GAAG,cAAc,CAAC,KAAK,CAAC;gBAC1C,IAAI,GAAG,GAAG,eAAS,EAAE,CAAC;gBAEtB,EAAE,CAAC,CAAC,OAAO,GAAG,KAAK,WAAW,CAAC,CAAC,CAAC;oBAC/B,OAAO,GAAG,CAAC,UAAU,GAAG,yBAAyB,CAAC,cAAc,CAAC,EAAE,CAAC;wBAClE,cAAc,EAAE,CAAC;oBACnB,CAAC;gBACH,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,EAAE,CAAC,CAAC,YAAY,KAAK,SAAS,CAAC,CAAC,CAAC;wBAC/B,cAAc,GAAG,YAAY,CAAC;oBAChC,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACN,MAAM,IAAI,KAAK,CACb,4FAA4F;4BAC5F,+DAA+D,CAChE,CAAC;oBACJ,CAAC;gBACH,CAAC;gBAED,MAAM,CAAC,cAAc,CAAC;YACxB,CAAC;YACH,yBAAC;QAAD,CAxDO,AAwDN,CAxDuC,6BAAa,EAwDpD,CAAC;IACJ,CAAC;IA3De,0BAAkB,qBA2DjC,CAAA","file":"utilities/decorators/withResponsiveMode.js","sourcesContent":["import * as React from 'react';\nimport { BaseDecorator } from './BaseDecorator';\nimport { getWindow } from '../dom';\n\nexport interface IWithResponsiveModeState {\n  responsiveMode?: ResponsiveMode;\n}\n\nexport enum ResponsiveMode {\n  small = 0,\n  medium = 1,\n  large = 2,\n  xLarge = 3,\n  xxLarge = 4,\n  xxxLarge = 5\n}\n\nconst RESPONSIVE_MAX_CONSTRAINT = [\n  479,\n  639,\n  1023,\n  1365,\n  1919,\n  99999999\n];\n\nlet _defaultMode: ResponsiveMode;\n\n/**\n * Allows a server rendered scenario to provide a default responsive mode.\n */\nexport function setResponsiveMode(responsiveMode: ResponsiveMode) {\n  _defaultMode = responsiveMode;\n}\n\nexport function withResponsiveMode<P extends { responsiveMode?: ResponsiveMode }, S>(ComposedComponent: (new (props: P, ...args: any[]) => React.Component<P, S>)): any {\n\n  return class WithResponsiveMode extends BaseDecorator<P, IWithResponsiveModeState> {\n\n    constructor() {\n      super();\n      this._updateComposedComponentRef = this._updateComposedComponentRef.bind(this);\n\n      this.state = {\n        responsiveMode: this._getResponsiveMode()\n      };\n    }\n\n    public componentDidMount() {\n      this._events.on(window, 'resize', () => {\n        let responsiveMode = this._getResponsiveMode();\n\n        if (responsiveMode !== this.state.responsiveMode) {\n          this.setState({\n            responsiveMode: responsiveMode\n          });\n        }\n      });\n    }\n\n    public componentWillUnmount() {\n      this._events.dispose();\n    }\n\n    public render() {\n      let { responsiveMode } = this.state;\n\n      return (\n        <ComposedComponent ref={ this._updateComposedComponentRef } responsiveMode={ responsiveMode } { ...this.props } />\n      );\n    }\n\n    private _getResponsiveMode(): ResponsiveMode {\n      let responsiveMode = ResponsiveMode.small;\n      let win = getWindow();\n\n      if (typeof win !== 'undefined') {\n        while (win.innerWidth > RESPONSIVE_MAX_CONSTRAINT[responsiveMode]) {\n          responsiveMode++;\n        }\n      } else {\n        if (_defaultMode !== undefined) {\n          responsiveMode = _defaultMode;\n        } else {\n          throw new Error(\n            'Content was rendered in a server environment without providing a default responsive mode. ' +\n            'Call setResponsiveMode to define what the responsive mode is.'\n          );\n        }\n      }\n\n      return responsiveMode;\n    }\n  };\n}\n"],"sourceRoot":"../../../src"}