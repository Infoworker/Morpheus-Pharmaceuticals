{"version":3,"sources":["utilities/router/Router.tsx"],"names":[],"mappings":"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","file":"utilities/router/Router.js","sourcesContent":["import * as React from 'react';\nimport { EventGroup } from '../eventGroup/EventGroup';\n\nexport interface IRouterProps {\n  replaceState?: boolean;\n  children?: React.ReactElement<any>[];\n  onNewRouteLoaded?: () => void;\n}\n\nexport interface IRouterState {\n  path: string;\n}\n\nexport class Router extends React.Component<IRouterProps, IRouterState> {\n  private _events: EventGroup;\n\n  constructor() {\n    super();\n\n    this.state = {\n      path: location.hash\n    };\n    this._events = new EventGroup(this);\n  }\n\n  public componentDidUpdate(prevProps: IRouterProps, prevState: IRouterState) {\n\n    if (this.state.path !== prevState.path) {\n      window.scrollTo(0, 0);\n    }\n  }\n\n  public render() {\n    return _getComponent(this.state.path, this.props.children);\n  }\n\n  public componentDidMount() {\n    this._events.on(window, 'hashchange', () => {\n      if (this.state.path !== location.hash) {\n        this.setState({ path: location.hash }, () => {\n          if (this.props.onNewRouteLoaded) {\n            this.props.onNewRouteLoaded();\n          }\n        });\n      }\n    });\n\n    if (this.props.onNewRouteLoaded) {\n      this.props.onNewRouteLoaded();\n    }\n  }\n\n  public componentWillUnmount() {\n    this._events.dispose();\n  }\n}\n\nfunction _getComponent(matchPath, children) {\n  let path = matchPath;\n  if (children && children.$$typeof) {\n    children = [ children ];\n  }\n\n  // Check if an in page anchor link was passed to the Url #/example/route#inPageAnchorLink\n  if (_hasAnchorLink(path)) {\n    // Extract the base path #/example/route - #inPageAnchorLink\n    path = _extractRoute(path);\n  }\n\n  for (let i = 0; children && i < children.length; i++) {\n    let currentChild = children[i];\n\n    if (_match(path, currentChild)) {\n      let component = currentChild.props.component;\n      let childComponent = _getComponent(path, currentChild.props.children);\n\n      return React.createElement(component, null, childComponent);\n    }\n  }\n  return null;\n}\n\nfunction _hasAnchorLink(path) {\n  return (path.match(/#/g) || []).length > 1;\n}\n\n/*\n  Extract the route from the URL minus the in page anchor link\n  Example URL #/example/route#inPageAnchorLink\n  Returns #/example/route\n*/\nfunction _extractRoute(path) {\n  let index = path.lastIndexOf('#');\n  if (index >= 0) {\n    path = path.substr(0, index);\n  }\n  return path;\n}\n\nfunction _match(currentPath, child): boolean {\n  if (child.props) {\n    let { path } = child.props;\n\n    path = path || '';\n    currentPath = currentPath || '';\n\n    return (\n      (!path) ||\n      (path.toLowerCase() === currentPath.toLowerCase())\n    );\n  }\n\n  return false;\n}\n"],"sourceRoot":"../../../src"}