{"version":3,"sources":["components/GroupedList/GroupHeader.tsx"],"names":[],"mappings":"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","file":"components/GroupedList/GroupHeader.js","sourcesContent":["import * as React from 'react';\nimport {\n  IGroupDividerProps\n} from './index';\nimport { SelectionMode } from '../../utilities/selection/index';\nimport { Check } from '../Check/Check';\nimport { GroupSpacer } from './GroupSpacer';\nimport { Spinner } from '../../Spinner';\nimport { FocusZone, FocusZoneDirection } from '../../FocusZone';\nimport { css } from '../../utilities/css';\nimport { autobind } from '../../utilities/autobind';\nimport './GroupHeader.scss';\n\nexport interface IGroupHeaderState {\n  isCollapsed: boolean;\n  isLoadingVisible: boolean;\n}\n\nexport class GroupHeader extends React.Component<IGroupDividerProps, IGroupHeaderState> {\n  constructor(props: IGroupDividerProps) {\n    super(props);\n\n    this.state = {\n      isCollapsed: this.props.group && this.props.group.isCollapsed,\n      isLoadingVisible: false\n    };\n  }\n\n  public componentWillReceiveProps(newProps) {\n    if (newProps.group) {\n      let newCollapsed = newProps.group.isCollapsed;\n      let isGroupLoading = newProps.headerProps && newProps.headerProps.isGroupLoading;\n      let newLoadingVisible = !newCollapsed && isGroupLoading && isGroupLoading(newProps.group);\n\n      this.setState({\n        isCollapsed: newCollapsed,\n        isLoadingVisible: newLoadingVisible\n      });\n    }\n  }\n\n  public render() {\n    let {\n      group,\n      groupLevel,\n      viewport,\n      selectionMode,\n      loadingText,\n      isSelected,\n      selected,\n      isCollapsedGroupSelectVisible\n    } = this.props;\n    let { isCollapsed, isLoadingVisible } = this.state;\n\n    if (isCollapsedGroupSelectVisible === undefined) {\n      isCollapsedGroupSelectVisible = true;\n    }\n    let canSelectGroup = selectionMode === SelectionMode.multiple;\n    let isSelectionCheckVisible = canSelectGroup && (isCollapsedGroupSelectVisible || !(group && group.isCollapsed));\n    let currentlySelected = isSelected || selected;\n    return group && (\n      <div\n        className={ css('ms-GroupHeader', {\n          'is-selected': currentlySelected\n        }) }\n        style={ viewport ? { minWidth: viewport.width } : {} }\n        onClick={ this._onHeaderClick }\n        aria-label={ group.ariaLabel || group.name }\n        data-is-focusable={ true } >\n\n        <FocusZone direction={ FocusZoneDirection.horizontal }>\n\n          { isSelectionCheckVisible ? (\n            <button\n              className='ms-GroupHeader-check'\n              data-selection-toggle={ true }\n              onClick={ this._onToggleSelectGroupClick } >\n              <Check checked={ currentlySelected } />\n            </button>\n          ) : (selectionMode !== SelectionMode.none ? GroupSpacer({ count: 1 }) : null)\n          }\n\n          { GroupSpacer({ count: groupLevel }) }\n\n          <div className='ms-GroupHeader-dropIcon'><i className='ms-Icon ms-Icon--Tag'></i></div>\n          <button className='ms-GroupHeader-expand' onClick={ this._onToggleCollapse }>\n            <i className={ css('ms-Icon ms-Icon--ChevronDown', {\n              'is-collapsed': isCollapsed\n            }) } />\n          </button>\n\n          <div className='ms-GroupHeader-title ms-font-xl'>\n            <span>{ group.name } </span>\n            <span>({ group.count }) </span>\n          </div>\n\n          <div className={ css('ms-GroupHeader-loading', { 'is-loading': isLoadingVisible }) }>\n            <Spinner label={ loadingText } />\n          </div>\n\n        </FocusZone>\n      </div>\n    );\n  }\n\n  @autobind\n  private _onToggleCollapse(ev: React.MouseEvent<HTMLElement>) {\n    let { group, onToggleCollapse, isGroupLoading } = this.props;\n    let { isCollapsed } = this.state;\n\n    let newCollapsed = !isCollapsed;\n    let newLoadingVisible = !newCollapsed && isGroupLoading && isGroupLoading(group);\n\n    this.setState({\n      isCollapsed: newCollapsed,\n      isLoadingVisible: newLoadingVisible\n    });\n    if (onToggleCollapse) {\n      onToggleCollapse(group);\n    }\n\n    ev.stopPropagation();\n    ev.preventDefault();\n  }\n\n  @autobind\n  private _onToggleSelectGroupClick(ev: React.MouseEvent<HTMLElement>) {\n    let { onToggleSelectGroup, group } = this.props;\n\n    if (onToggleSelectGroup) {\n      onToggleSelectGroup(group);\n    }\n\n    ev.preventDefault();\n    ev.stopPropagation();\n  }\n\n  @autobind\n  private _onHeaderClick() {\n    let { group, onGroupHeaderClick, onToggleSelectGroup } = this.props;\n\n    if (onGroupHeaderClick) {\n      onGroupHeaderClick(group);\n    } else if (onToggleSelectGroup) {\n      onToggleSelectGroup(group);\n    }\n  }\n}\n"],"sourceRoot":"../../../src"}