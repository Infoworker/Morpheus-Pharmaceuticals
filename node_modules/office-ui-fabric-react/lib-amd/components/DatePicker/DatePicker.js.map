{"version":3,"sources":["components/DatePicker/DatePicker.tsx"],"names":[],"mappings":"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","file":"components/DatePicker/DatePicker.js","sourcesContent":["import * as React from 'react';\nimport {\n  DayOfWeek,\n  IDatePickerProps\n} from './DatePicker.Props';\nimport { DatePickerDay } from './DatePickerDay';\nimport { DatePickerMonth } from './DatePickerMonth';\nimport { TextField } from '../../TextField';\nimport {\n  autobind,\n  BaseComponent,\n  KeyCodes,\n  css,\n  elementContains\n} from '../../Utilities';\nimport './DatePicker.scss';\n\nexport interface IDatePickerState {\n  /** The currently focused date in the drop down, but not necessarily selected */\n  navigatedDate?: Date;\n  selectedDate?: Date;\n  formattedDate?: string;\n  isDatePickerShown?: boolean;\n  errorMessage?: string;\n}\n\nexport class DatePicker extends BaseComponent<IDatePickerProps, IDatePickerState> {\n  public static defaultProps: IDatePickerProps = {\n    allowTextInput: false,\n    formatDate: (date: Date) => {\n      if (date) {\n        return date.toDateString();\n      }\n\n      return null;\n    },\n    parseDateFromString: (dateStr: string) => {\n      const date = Date.parse(dateStr);\n      if (date) {\n        return new Date(date);\n      }\n\n      return null;\n    },\n    firstDayOfWeek: DayOfWeek.Sunday,\n    isRequired: false,\n    isMonthPickerVisible: true,\n    strings: null\n  };\n\n  public refs: {\n    [key: string]: React.ReactInstance;\n    root: HTMLElement;\n    textField: TextField;\n    textFieldContainer: HTMLElement;\n    dayPicker: DatePickerDay;\n  };\n\n  private _preventFocusOpeningPicker: boolean;\n  private _focusOnSelectedDateOnUpdate: boolean;\n\n  constructor(props: IDatePickerProps) {\n    super();\n\n    let { formatDate, value } = props;\n\n    this.state = {\n      selectedDate: value || new Date(),\n      formattedDate: formatDate && value ? formatDate(value) : null,\n      isDatePickerShown: false,\n      errorMessage: ''\n    };\n\n    this._preventFocusOpeningPicker = false;\n  }\n\n  public componentWillReceiveProps(nextProps: IDatePickerProps) {\n    let { formatDate, isRequired, strings, value } = nextProps;\n    const errorMessage = isRequired && !value ? (strings.isRequiredErrorMessage || '*') : '';\n\n    this.setState({\n      selectedDate: value || new Date(),\n      formattedDate: formatDate && value ? formatDate(value) : null,\n      errorMessage: errorMessage\n    });\n  }\n\n  public componentDidMount() {\n    this._events.on(window, 'scroll', this._dismissDatePickerPopup);\n    this._events.on(window, 'resize', this._dismissDatePickerPopup);\n    this._events.on(window, 'click', this._onClickCapture, true);\n    this._events.on(window, 'focus', this._onClickCapture, true);\n    this._events.on(window, 'touchstart', this._onClickCapture, true);\n  }\n\n  public componentDidUpdate() {\n    if (this._focusOnSelectedDateOnUpdate) {\n      this.refs.dayPicker.focus();\n      this._focusOnSelectedDateOnUpdate = false;\n    }\n  }\n\n  public render() {\n    let rootClass = 'ms-DatePicker';\n    let { firstDayOfWeek, strings, label, isRequired, ariaLabel, placeholder, allowTextInput } = this.props;\n    let { isDatePickerShown, formattedDate, selectedDate, navigatedDate, errorMessage } = this.state;\n\n    return (\n      <div className={ rootClass } ref='root'>\n        <div ref='textFieldContainer'>\n          <TextField\n            ariaLabel={ ariaLabel }\n            aria-haspopup='true'\n            required={ isRequired }\n            onKeyDown={ this._onTextFieldKeyDown }\n            onFocus={ this._onTextFieldFocus }\n            onBlur={ this._onTextFieldBlur }\n            onClick={ this._onTextFieldClick }\n            onChanged={ this._onTextFieldChanged }\n            errorMessage={ errorMessage }\n            label={ label }\n            placeholder={ placeholder }\n            iconClass={ css(\n              'ms-Icon ms-Icon--Calendar',\n              label ? 'ms-DatePicker-event--with-label' : 'ms-DatePicker-event--without-label'\n            ) }\n            readOnly={ !allowTextInput }\n            value={ formattedDate }\n            ref='textField' />\n        </div>\n\n        { isDatePickerShown && (\n          <div className={'ms-DatePicker-picker ms-DatePicker-picker--opened ms-DatePicker-picker--focused ' + (this.props.isMonthPickerVisible ? 'is-monthPickerVisible' : '') } >\n            <div className='ms-DatePicker-holder' onKeyDown={ this._onDatePickerPopupKeyDown }>\n              <div className='ms-DatePicker-frame'>\n                <div className='ms-DatePicker-wrap'>\n                  <DatePickerDay\n                    selectedDate={ selectedDate }\n                    navigatedDate={ navigatedDate }\n                    onSelectDate={ this._onSelectDate }\n                    onNavigateDate={ this._onNavigateDate }\n                    firstDayOfWeek={ firstDayOfWeek }\n                    strings={ strings }\n                    ref='dayPicker' />\n                  <DatePickerMonth\n                    navigatedDate={ navigatedDate }\n                    strings={ strings }\n                    onNavigateDate={ this._onNavigateDate } />\n                  <span\n                    className='ms-DatePicker-goToday js-goToday'\n                    onClick={ this._onGotoToday }\n                    onKeyDown={ this._onGotoTodayKeyDown }\n                    tabIndex={ 0 }>\n                    { strings.goToToday }\n                  </span>\n                </div>\n              </div>\n            </div>\n          </div>\n        ) }\n      </div>\n    );\n  }\n\n  private _restoreFocusToTextField() {\n    this._preventFocusOpeningPicker = true;\n    this.refs.textField.focus();\n  }\n\n  private _navigateDay(date: Date) {\n    this.setState({\n      navigatedDate: date\n    });\n  }\n\n  @autobind\n  private _onNavigateDate(date: Date, focusOnNavigatedDay: boolean) {\n    this._focusOnSelectedDateOnUpdate = this._focusOnSelectedDateOnUpdate || focusOnNavigatedDay;\n    this._navigateDay(date);\n  }\n\n  @autobind\n  private _onSelectDate(date: Date) {\n    let { formatDate, onSelectDate } = this.props;\n\n    this.setState({\n      selectedDate: date,\n      isDatePickerShown: false,\n      formattedDate: formatDate && date ? formatDate(date) : null,\n    });\n\n    this._restoreFocusToTextField();\n\n    if (onSelectDate) {\n      onSelectDate(date);\n    }\n  };\n\n  @autobind\n  private _onGotoToday() {\n    this._focusOnSelectedDateOnUpdate = true;\n    this._navigateDay(new Date());\n  };\n\n  @autobind\n  private _onGotoTodayKeyDown(ev: React.KeyboardEvent<HTMLElement>) {\n    if (ev.which === KeyCodes.enter) {\n      ev.preventDefault();\n      this._onGotoToday();\n    }\n  };\n\n  @autobind\n  private _onTextFieldFocus(ev: React.FocusEvent<HTMLElement>) {\n    if (!this.props.allowTextInput) {\n      if (!this._preventFocusOpeningPicker) {\n        this._showDatePickerPopup();\n      }\n\n      this._preventFocusOpeningPicker = false;\n    }\n  };\n\n  @autobind\n  private _onTextFieldBlur(ev: React.FocusEvent<HTMLElement>) {\n    this._validateTextInput();\n  };\n\n  @autobind\n  private _onTextFieldChanged(newValue: string) {\n    if (this.props.allowTextInput) {\n      if (this.state.isDatePickerShown) {\n        this._dismissDatePickerPopup();\n      }\n\n      this.setState({\n        errorMessage: '',\n        formattedDate: newValue\n      });\n    }\n  }\n\n  @autobind\n  private _onTextFieldKeyDown(ev: React.KeyboardEvent<HTMLElement>) {\n    switch (ev.which) {\n      case KeyCodes.enter:\n        ev.preventDefault();\n        ev.stopPropagation();\n        if (!this.state.isDatePickerShown) {\n          this._showDatePickerPopup();\n        } else {\n          // When DatePicker allows input date string directly,\n          // it is expected to hit another enter to close the popup\n          if (this.props.allowTextInput) {\n            this._restoreFocusToTextField();\n            this._dismissDatePickerPopup();\n          }\n        }\n        break;\n\n      case KeyCodes.escape:\n        this._handleEscKey(ev);\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  @autobind\n  private _onDatePickerPopupKeyDown(ev: React.KeyboardEvent<HTMLElement>) {\n    switch (ev.which) {\n      case KeyCodes.enter:\n        ev.preventDefault();\n        break;\n\n      case KeyCodes.backspace:\n        ev.preventDefault();\n        break;\n\n      case KeyCodes.escape:\n        this._handleEscKey(ev);\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  @autobind\n  private _onClickCapture(ev: React.MouseEvent<HTMLElement>) {\n    if (!elementContains(this.refs.root, ev.target as HTMLElement)) {\n      this._dismissDatePickerPopup();\n    }\n  }\n\n  @autobind\n  private _onTextFieldClick(ev: React.MouseEvent<HTMLElement>) {\n    if (!this.state.isDatePickerShown) {\n      this._showDatePickerPopup();\n    } else {\n      if (this.props.allowTextInput) {\n        this.setState({\n          isDatePickerShown: false\n        });\n      }\n    }\n  }\n\n  private _showDatePickerPopup() {\n    if (!this.state.isDatePickerShown) {\n      this._focusOnSelectedDateOnUpdate = true;\n      this.setState({\n        isDatePickerShown: true,\n        navigatedDate: this.state.selectedDate,\n        errorMessage: ''\n      });\n    }\n  }\n\n  private _dismissDatePickerPopup() {\n    if (this.state.isDatePickerShown) {\n      this.setState({\n        isDatePickerShown: false\n      });\n\n      this._validateTextInput();\n    }\n  }\n\n  @autobind\n  private _handleEscKey(ev: React.KeyboardEvent<HTMLElement>) {\n    this._restoreFocusToTextField();\n    this._dismissDatePickerPopup();\n  }\n\n  @autobind\n  private _validateTextInput() {\n    let { isRequired, allowTextInput, strings, formatDate, parseDateFromString, onSelectDate } = this.props;\n    const inputValue: string = this.state.formattedDate;\n\n    // Do validation only if DatePicker's popup is dismissed\n    if (this.state.isDatePickerShown) {\n      return;\n    }\n\n    // Check when DatePicker is a required field but has NO input value\n    if (isRequired && !inputValue) {\n      this.setState({\n        // Since fabic react doesn't have loc support yet\n        // use the symbol '*' to represent error message\n        errorMessage: strings.isRequiredErrorMessage || '*'\n      });\n      return;\n    }\n\n    if (allowTextInput) {\n      let date = null;\n      if (inputValue) {\n        date = parseDateFromString(inputValue);\n        if (!date) {\n          this.setState({\n            errorMessage: strings.invalidInputErrorMessage || '*'\n          });\n        } else {\n          this.setState({\n            selectedDate: date,\n            formattedDate: formatDate && date ? formatDate(date) : null,\n            errorMessage: ''\n          });\n        }\n      } else {\n        // No input date string shouldn't be an error if field is not required\n        this.setState({\n          errorMessage: ''\n        });\n      }\n\n      // Execute onSelectDate callback\n      if (onSelectDate) {\n        // If no input date string or input date string is invalid\n        // date variable will be null, callback should expect null value for this case\n        onSelectDate(date);\n      }\n    }\n  }\n}\n"],"sourceRoot":"../../../src"}