{"version":3,"sources":["common/BaseComponent.test.tsx"],"names":[],"mappings":";;;;;;;IAOM,wBAAM,EAAE,oBAAM,CAAU;IAE9B,IAAI,gBAAgB,GAAG,6BAAa,CAAC,OAAO,CAAC;IAE7C;QAA4B,iCAAqB;QAAjD;YAA4B,8BAAqB;QAyCjD,CAAC;QAvCQ,0CAAkB,GAAzB;YACE,IAAI,CAAC,cAAc,EAAE,CAAC;QACxB,CAAC;QAEM,yCAAiB,GAAxB;YACE,IAAI,CAAC,cAAc,EAAE,CAAC;QACxB,CAAC;QAEM,6CAAqB,GAA5B;YACE,IAAI,CAAC,cAAc,EAAE,CAAC;QACxB,CAAC;QAEM,2CAAmB,GAA1B;YACE,IAAI,CAAC,cAAc,EAAE,CAAC;QACxB,CAAC;QAEM,iDAAyB,GAAhC;YACE,IAAI,CAAC,cAAc,EAAE,CAAC;QACxB,CAAC;QAEM,8BAAM,GAAb;YACE,IAAI,CAAC,cAAc,EAAE,CAAC;YACtB,MAAM,CAAC,IAAI,CAAC;QACd,CAAC;QAEM,0CAAkB,GAAzB;YACE,IAAI,CAAC,cAAc,EAAE,CAAC;QACxB,CAAC;QAEM,4CAAoB,GAA3B;YACE,IAAI,CAAC,cAAc,EAAE,CAAC;QACxB,CAAC;QAEO,sCAAc,GAAtB;YACE,IAAI,GAAG,GAAe,IAAI,CAAC;YAE3B,iBAAiB;YACjB,GAAG,EAAE,CAAC;QACR,CAAC;QACH,oBAAC;IAAD,CAzCA,AAyCC,CAzC2B,6BAAa,GAyCxC;IAED,QAAQ,CAAC,eAAe,EAAE;QACxB,SAAS,CAAC;YACR,6BAAa,CAAC,OAAO,GAAG,gBAAgB,CAAC;QAC3C,CAAC,CAAC,CAAC;QAEH,aAAa,CAAC,oBAAoB,CAAC,CAAC;QACpC,aAAa,CAAC,mBAAmB,CAAC,CAAC;QACnC,aAAa,CAAC,uBAAuB,CAAC,CAAC;QACvC,aAAa,CAAC,qBAAqB,CAAC,CAAC;QACrC,aAAa,CAAC,2BAA2B,CAAC,CAAC;QAC3C,aAAa,CAAC,QAAQ,CAAC,CAAC;QACxB,aAAa,CAAC,oBAAoB,CAAC,CAAC;QACpC,aAAa,CAAC,sBAAsB,CAAC,CAAC;QAEtC,EAAE,CAAC,kBAAkB,EAAE;YACrB;gBAAkB,uBAAqB;gBAAvC;oBAAkB,8BAAqB;gBAMvC,CAAC;gBAHQ,oBAAM,GAAb;oBACE,MAAM,CAAC,qBAAC,GAAG,IAAC,GAAG,EAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAG,EAAG,CAAC;gBAClD,CAAC;gBACH,UAAC;YAAD,CANA,AAMC,CANiB,6BAAa,GAM9B;YAED,IAAI,SAAS,GAAG,cAAc,CAAC,kBAAkB,CAC/C,oBAAC,GAAG,OAAG,CACD,CAAC;YAET,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC;QAClC,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,uBAAuB,UAAU;QAC/B,EAAE,CAAC,+BAA6B,UAAU,eAAY,EAAE;YACtD,IAAI,gBAAgB,GAAG,IAAI,CAAC;YAE5B,6BAAa,CAAC,OAAO,GAAG,UAAC,YAAY,EAAE,EAAE,IAAK,OAAA,gBAAgB,GAAG,YAAY,EAA/B,CAA+B,CAAC;YAE9E,IAAI,CAAC,GAAG,IAAI,aAAa,EAAE,CAAC;YAE5B,CAAC,CAAC,UAAU,CAAC,EAAE,CAAC;YAEhB,MAAM,CAAC,gBAAgB,KAAK,IAAI,EAAE,2BAA2B,CAAC,CAAC;QACjE,CAAC,CAAC,CAAC;IACL,CAAC","file":"common/BaseComponent.test.js","sourcesContent":["/* tslint:disable:no-unused-variable */\nimport * as React from 'react';\n/* tslint:enable:no-unused-variable */\n\nimport * as ReactTestUtils from 'react-addons-test-utils';\nimport { BaseComponent } from './BaseComponent';\n\nlet { assert, expect } = chai;\n\nlet _originalOnError = BaseComponent.onError;\n\nclass TestComponent extends BaseComponent<{}, {}> {\n\n  public componentWillMount(): void {\n    this._createNullRef();\n  }\n\n  public componentDidMount(): void {\n    this._createNullRef();\n  }\n\n  public shouldComponentUpdate(): void {\n    this._createNullRef();\n  }\n\n  public componentWillUpdate(): void {\n    this._createNullRef();\n  }\n\n  public componentWillReceiveProps(): void {\n    this._createNullRef();\n  }\n\n  public render(): JSX.Element {\n    this._createNullRef();\n    return null;\n  }\n\n  public componentDidUpdate(): void {\n    this._createNullRef();\n  }\n\n  public componentWillUnmount(): void {\n    this._createNullRef();\n  }\n\n  private _createNullRef() {\n    let foo: () => void = null;\n\n    // Calling a null\n    foo();\n  }\n}\n\ndescribe('BaseComponent', () => {\n  afterEach(() => {\n    BaseComponent.onError = _originalOnError;\n  });\n\n  _buildTestFor('componentWillMount');\n  _buildTestFor('componentDidMount');\n  _buildTestFor('shouldComponentUpdate');\n  _buildTestFor('componentWillUpdate');\n  _buildTestFor('componentWillReceiveProps');\n  _buildTestFor('render');\n  _buildTestFor('componentDidUpdate');\n  _buildTestFor('componentWillUnmount');\n\n  it('can resolve refs', () => {\n    class Foo extends BaseComponent<{}, {}> {\n      public root: HTMLElement;\n\n      public render() {\n        return <div ref={ this._resolveRef('root') } />;\n      }\n    }\n\n    let component = ReactTestUtils.renderIntoDocument(\n      <Foo />\n    ) as any;\n\n    expect(component.root).to.exist;\n  });\n});\n\nfunction _buildTestFor(methodName) {\n  it(`calls the error logger on ${methodName} exception`, () => {\n    let lastErrorMessage = null;\n\n    BaseComponent.onError = (errorMessage, ex) => lastErrorMessage = errorMessage;\n\n    let c = new TestComponent();\n\n    c[methodName]();\n\n    assert(lastErrorMessage !== null, 'Error callback not called');\n  });\n}"],"sourceRoot":"../../src"}