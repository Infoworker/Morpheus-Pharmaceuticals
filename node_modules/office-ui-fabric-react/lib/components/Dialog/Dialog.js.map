{"version":3,"sources":["components/Dialog/Dialog.tsx"],"names":[],"mappings":"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","file":"components/Dialog/Dialog.js","sourcesContent":["import * as React from 'react';\nimport { FocusTrapZone } from '../FocusTrapZone/index';\nimport { IDialogProps, DialogType } from './Dialog.Props';\nimport { Overlay } from '../../Overlay';\nimport { Layer } from '../../Layer';\nimport { Button, ButtonType } from '../../Button';\nimport { DialogFooter } from './DialogFooter';\nimport { css } from '../../utilities/css';\nimport { Popup } from '../Popup/index';\nimport { withResponsiveMode, ResponsiveMode } from '../../utilities/decorators/withResponsiveMode';\nimport { getId } from '../../utilities/object';\nimport { BaseComponent } from '../../common/BaseComponent';\nimport './Dialog.scss';\n\n// @TODO - need to change this to a panel whenever the breakpoint is under medium (verify the spec)\n\nexport interface IDialogState {\n  isOpen?: boolean;\n  isAnimatingOpen?: boolean;\n  isAnimatingClose?: boolean;\n  id?: string;\n}\n\n@withResponsiveMode\nexport class Dialog extends BaseComponent<IDialogProps, IDialogState> {\n\n  public static defaultProps: IDialogProps = {\n    isOpen: false,\n    type: DialogType.normal,\n    isDarkOverlay: true,\n    isBlocking: false,\n    className: '',\n    containerClassName: '',\n    contentClassName: ''\n  };\n\n  constructor(props: IDialogProps) {\n    super(props);\n\n    this._onDialogRef = this._onDialogRef.bind(this);\n\n    this.state = {\n      id: getId('Dialog'),\n      isAnimatingOpen: props.isOpen,\n      isAnimatingClose: false\n    };\n  }\n\n  public componentWillReceiveProps(newProps: IDialogProps) {\n    // Opening the dialog\n    if (newProps.isOpen && !this.state.isOpen) {\n      this.setState({\n        isOpen: true,\n        isAnimatingOpen: true,\n        isAnimatingClose: false\n      });\n    }\n\n    // Closing the dialog\n    if (!newProps.isOpen && this.state.isOpen) {\n      this.setState({\n        isAnimatingOpen: false,\n        isAnimatingClose: true\n      });\n    }\n  }\n\n  public render() {\n    let { type, isDarkOverlay, onDismiss, title, subText, isBlocking, responsiveMode, elementToFocusOnDismiss, ignoreExternalFocusing, forceFocusInsideTrap, firstFocusableSelector, closeButtonAriaLabel, onLayerMounted, isClickableOutsideFocusTrap} = this.props;\n    let { id, isOpen, isAnimatingOpen, isAnimatingClose } = this.state;\n    // @TODO - the discussion on whether the Dialog contain a property for rendering itself is still being discussed\n    if (!isOpen) {\n      return null;\n    }\n\n    let subTextContent;\n    const dialogClassName = css('ms-Dialog', this.props.className, {\n      'ms-Dialog--lgHeader': type === DialogType.largeHeader,\n      'ms-Dialog--close': type === DialogType.close,\n      'is-open': isOpen,\n      'is-animatingOpen': isAnimatingOpen,\n      'is-animatingClose': isAnimatingClose\n    });\n    let groupings = this._groupChildren();\n\n    if (subText) {\n      subTextContent = <p className='ms-Dialog-subText' id={ id + '-subText' }>{ subText }</p>;\n    }\n\n    // @temp tuatology - Will adjust this to be a panel at certain breakpoints\n    if (responsiveMode >= ResponsiveMode.small) {\n      return (\n        <Layer onLayerMounted={ onLayerMounted }>\n          <Popup\n            role='dialog'\n            ariaLabelledBy={ title ? id + '-title' : '' }\n            ariaDescribedBy={ subText ? id + '-subText' : '' }\n            onDismiss={ onDismiss }\n            >\n            <div\n              className={ dialogClassName }\n              ref={ this._onDialogRef }>\n              <Overlay isDarkThemed={ isDarkOverlay } onClick={ isBlocking ? null : onDismiss } />\n              <FocusTrapZone\n                className={ css('ms-Dialog-main', this.props.containerClassName) }\n                elementToFocusOnDismiss={ elementToFocusOnDismiss }\n                isClickableOutsideFocusTrap={ isClickableOutsideFocusTrap ? isClickableOutsideFocusTrap : !isBlocking }\n                ignoreExternalFocusing={ ignoreExternalFocusing }\n                forceFocusInsideTrap={ forceFocusInsideTrap }\n                firstFocusableSelector={ firstFocusableSelector }>\n                <div className='ms-Dialog-header'>\n                  <p className='ms-Dialog-title' id={ id + '-title' }>{ title }</p>\n                  <div className='ms-Dialog-topButton'>\n                    <Button\n                      className='ms-Dialog-button ms-Dialog-button--close'\n                      buttonType={ ButtonType.icon }\n                      icon='Cancel'\n                      rootProps={ { title: closeButtonAriaLabel } }\n                      ariaLabel={ closeButtonAriaLabel }\n                      onClick={ onDismiss }\n                      />\n                  </div>\n                </div>\n                <div className='ms-Dialog-inner'>\n                  <div className={ css('ms-Dialog-content', this.props.contentClassName) }>\n                    { subTextContent }\n                    { groupings.contents }\n                  </div>\n                  { groupings.footers }\n                </div>\n              </FocusTrapZone>\n            </div>\n          </Popup>\n        </Layer>\n      );\n    }\n  }\n\n  // @TODO - typing the footers as an array of DialogFooter is difficult because\n  // casing \"child as DialogFooter\" causes a problem because\n  // \"Neither type 'ReactElement<any>' nor type 'DialogFooter' is assignable to the other.\"\n  private _groupChildren(): { footers: any[]; contents: any[]; } {\n\n    let groupings: { footers: any[]; contents: any[]; } = {\n      footers: [],\n      contents: []\n    };\n\n    React.Children.map(this.props.children, child => {\n      if (typeof child === 'object' && child !== null && child.type === DialogFooter) {\n        groupings.footers.push(child);\n      } else {\n        groupings.contents.push(child);\n      }\n    });\n\n    return groupings;\n  }\n\n  private _onDialogRef(ref: HTMLDivElement) {\n    if (ref) {\n      this._events.on(ref, 'animationend', this._onAnimationEnd);\n    } else {\n      this._events.off();\n    }\n  }\n\n  // Watch for completed animations and set the state\n  private _onAnimationEnd(ev: AnimationEvent) {\n\n    // The dialog has just opened (faded in)\n    if (ev.animationName.indexOf('fadeIn') > -1) {\n      this.setState({\n        isOpen: true,\n        isAnimatingOpen: false\n      });\n    }\n\n    // The dialog has just closed (faded out)\n    if (ev.animationName.indexOf('fadeOut') > -1) {\n      this.setState({\n        isOpen: false,\n        isAnimatingClose: false\n      });\n\n      // Call the onDismiss callback\n      if (this.props.onDismiss) {\n        this.props.onDismiss();\n      }\n    }\n  }\n}\n"],"sourceRoot":"../../../src"}