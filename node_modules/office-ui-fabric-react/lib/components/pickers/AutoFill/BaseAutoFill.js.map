{"version":3,"sources":["components/pickers/AutoFill/BaseAutoFill.tsx"],"names":[],"mappings":"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","file":"components/pickers/AutoFill/BaseAutoFill.js","sourcesContent":["import * as React from 'react';\nimport { IBaseAutoFillProps, IBaseAutoFill } from './BaseAutoFill.Props';\nimport { BaseComponent } from '../../../common/BaseComponent';\nimport { getNativeProps, inputProperties } from '../../../utilities/properties';\nimport { autobind } from '../../../utilities/autobind';\nimport { KeyCodes } from '../../../utilities/KeyCodes';\n\nexport interface IBaseAutoFillState {\n  value?: string;\n}\n\nconst SELECTION_FORWARD = 'forward';\nconst SELECTION_BACKWARD = 'backward';\n\nexport class BaseAutoFill extends BaseComponent<IBaseAutoFillProps, IBaseAutoFillState> implements IBaseAutoFill {\n\n  private _inputElement: HTMLInputElement;\n\n  constructor(props: IBaseAutoFillProps) {\n    super(props);\n    this.state = {\n      value: ''\n    };\n  }\n\n  public get cursorLocation(): number {\n    if (this._inputElement) {\n      let inputElement = this._inputElement;\n      if (inputElement.selectionDirection !== SELECTION_FORWARD) {\n        return inputElement.selectionEnd;\n      } else {\n        return inputElement.selectionStart;\n      }\n    } else {\n      return -1;\n    }\n  }\n\n  public get isValueSelected(): boolean {\n    return this.inputElement.selectionStart !== this.inputElement.selectionEnd;\n  }\n\n  public get value(): string {\n    return this.state.value;\n  }\n\n  public get selectionStart(): number {\n    return this._inputElement ? this._inputElement.selectionStart : -1;\n  }\n\n  public get selectionEnd(): number {\n    return this._inputElement ? this._inputElement.selectionEnd : -1;\n  }\n\n  public get inputElement(): HTMLInputElement {\n    return this._inputElement;\n  }\n\n  public componentDidUpdate() {\n    let { value } = this.state;\n    let { suggestedDisplayValue } = this.props;\n    let differenceIndex = 0;\n    if (value && suggestedDisplayValue && this._doesTextStartWith(suggestedDisplayValue, value)) {\n      while (differenceIndex < value.length && value[differenceIndex].toLocaleLowerCase() === suggestedDisplayValue[differenceIndex].toLocaleLowerCase()) {\n        differenceIndex++;\n      }\n      if (differenceIndex > 0) {\n        this._inputElement.setSelectionRange(differenceIndex, suggestedDisplayValue.length, SELECTION_BACKWARD);\n      }\n    }\n  }\n\n  public render() {\n    let {\n      value\n    } = this.state;\n    let {\n      suggestedDisplayValue\n    } = this.props;\n    let displayValue = value;\n\n    if (this._doesTextStartWith(suggestedDisplayValue, value)) {\n      displayValue = suggestedDisplayValue;\n    }\n\n    const nativeProps = getNativeProps(this.props, inputProperties);\n    return <input { ...nativeProps}\n      ref={ this._resolveRef('_inputElement') }\n      value={ displayValue }\n      autoCapitalize={ 'off' }\n      autoComplete={ 'off' }\n      onChange={ this._onChange }\n      onKeyDown={ this._onKeyDown }\n      />;\n  }\n\n  public focus() {\n    this._inputElement.focus();\n  }\n\n  public clear() {\n    this._updateValue('');\n  }\n\n  @autobind\n  private _onKeyDown(ev: React.KeyboardEvent<HTMLElement>) {\n    switch (ev.which) {\n      case KeyCodes.backspace:\n        this._handleBackspace(ev);\n        break;\n    }\n  }\n\n  private _handleBackspace(ev: React.KeyboardEvent<HTMLElement>) {\n    let { value } = this.state;\n    if (value && value.length > 0) {\n      this._updateValue(value.substring(0, value.length - 1));\n      // Since this effectively deletes a letter from the string we need to preventDefault so that\n      // the backspace doesn't try to delete a letter that's already been deleted. If a letter is deleted\n      // it can trigger the onChange event again which can have unintended consequences.\n      ev.preventDefault();\n    }\n  }\n\n  @autobind\n  private _onChange(ev: React.FormEvent<HTMLElement>) {\n    let value: string = (ev.target as HTMLInputElement).value;\n    this._updateValue(value);\n  }\n\n  private _notifyInputChange(newValue: string) {\n    if (this.props.onInputValueChange) {\n      this.props.onInputValueChange(newValue);\n    }\n  }\n\n  private _updateValue(newValue: string) {\n    this.setState({\n      value: newValue\n    }, () => this._notifyInputChange(newValue));\n  }\n\n  private _doesTextStartWith(text: string, startWith: string) {\n    if (!text || !startWith) {\n      return false;\n    }\n    return text.toLocaleLowerCase().indexOf(startWith.toLocaleLowerCase()) === 0;\n  }\n}"],"sourceRoot":"../../../../src"}