{"version":3,"sources":["components/SearchBox/SearchBox.tsx"],"names":[],"mappings":"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","file":"components/SearchBox/SearchBox.js","sourcesContent":["import * as React from 'react';\nimport { ISearchBoxProps } from './SearchBox.Props';\nimport {\n  BaseComponent,\n  autobind,\n  css,\n  getId,\n  elementContains,\n  getDocument,\n  KeyCodes\n} from '../../Utilities';\nimport './SearchBox.scss';\n\nexport interface ISearchBoxState {\n  value?: string;\n  hasFocus?: boolean;\n  id?: string;\n}\n\nexport class SearchBox extends BaseComponent<ISearchBoxProps, ISearchBoxState> {\n  public static defaultProps: ISearchBoxProps = {\n    labelText: 'Search',\n  };\n\n  private _rootElement: HTMLElement;\n  private _inputElement: HTMLInputElement;\n\n  public constructor(props: ISearchBoxProps) {\n    super(props);\n\n    // Handle deprecated prop\n    if (this.props.onChanged) {\n      this.props.onChange = this.props.onChanged;\n    }\n\n    this.state = {\n      value: props.value || '',\n      hasFocus: false,\n      id: getId('SearchBox')\n    };\n  }\n\n  public componentWillReceiveProps(newProps: ISearchBoxProps) {\n    if (newProps.value !== undefined) {\n      this.setState({\n        value: newProps.value\n      });\n    }\n  }\n\n  public render() {\n    let { labelText, className } = this.props;\n    let { value, hasFocus, id } = this.state;\n\n    return (\n      <div\n        ref={ this._resolveRef('_rootElement') }\n        className={ css('ms-SearchBox', className, {\n          'is-active': hasFocus,\n          'can-clear': value.length > 0\n        }) }\n        { ...{ onFocusCapture: this._onFocusCapture } }\n        >\n        <i className='ms-SearchBox-icon ms-Icon ms-Icon--Search'></i>\n        <input\n          id={ id }\n          className='ms-SearchBox-field'\n          placeholder={ labelText }\n          onChange={ this._onInputChange }\n          onKeyDown={ this._onKeyDown }\n          value={ value }\n          ref={ this._resolveRef('_inputElement') }\n          />\n        <div\n          className='ms-SearchBox-clearButton'\n          onClick={ this._onClearClick }\n          >\n          <i className='ms-Icon ms-Icon--Clear' />\n        </div>\n      </div>\n    );\n  }\n\n  @autobind\n  private _onClearClick(ev?: any) {\n    this.setState({\n      value: ''\n    });\n    this._callOnChange('');\n    ev.stopPropagation();\n    ev.preventDefault();\n\n    this._inputElement.focus();\n  }\n\n  @autobind\n  private _onFocusCapture(ev: React.FocusEvent<HTMLElement>) {\n    this.setState({\n      hasFocus: true\n    });\n\n    this._events.on(getDocument().body, 'focus', this._handleDocumentFocus, true);\n  }\n\n  @autobind\n  private _onKeyDown(ev: React.KeyboardEvent<HTMLInputElement>) {\n    switch (ev.which) {\n\n      case KeyCodes.escape:\n        this._onClearClick(ev);\n        break;\n\n      case KeyCodes.enter:\n        if (this.props.onSearch && this.state.value.length > 0) {\n          this.props.onSearch(this.state.value);\n        }\n        break;\n\n      default:\n        return;\n    }\n\n    // We only get here if the keypress has been handled.\n    ev.preventDefault();\n    ev.stopPropagation();\n  }\n\n  @autobind\n  private _onInputChange(ev: React.KeyboardEvent<HTMLInputElement>) {\n    this.setState({\n      value: this._inputElement.value\n    });\n    this._callOnChange(this._inputElement.value);\n  }\n\n  private _handleDocumentFocus(ev: FocusEvent) {\n    if (!elementContains(this._rootElement, ev.target as HTMLElement)) {\n      this._events.off(getDocument().body, 'focus');\n      this.setState({\n        hasFocus: false\n      });\n    }\n  }\n\n  private _callOnChange(newValue: string): void {\n    let { onChange } = this.props;\n\n    if (onChange) {\n      onChange(newValue);\n    }\n  }\n}\n"],"sourceRoot":"../../../src"}