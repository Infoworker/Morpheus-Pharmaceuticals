{"version":3,"sources":["components/Dropdown/Dropdown.tsx"],"names":[],"mappings":"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","file":"components/Dropdown/Dropdown.js","sourcesContent":["import * as React from 'react';\nimport { IDropdownProps, IDropdownOption } from './Dropdown.Props';\nimport { DirectionalHint } from '../../common/DirectionalHint';\nimport { Callout } from '../../Callout';\nimport { FocusZone, FocusZoneDirection } from '../../FocusZone';\nimport {\n} from '../../index';\nimport {\n  BaseComponent,\n  KeyCodes,\n  autobind,\n  css,\n  findIndex,\n  getId\n} from '../../Utilities';\nimport './Dropdown.scss';\n\nexport interface IDropdownState {\n  isOpen: boolean;\n  selectedIndex: number;\n  isDisabled: boolean;\n}\n\nexport class Dropdown extends BaseComponent<IDropdownProps, any> {\n\n  public static defaultProps = {\n    options: []\n  };\n\n  private static Option: string = 'option';\n\n  public refs: {\n    [key: string]: React.ReactInstance,\n    root: HTMLElement,\n    focusZone: FocusZone\n  };\n\n  private _optionList: HTMLElement;\n  private _dropDown: HTMLDivElement;\n  private _dropdownLabel: HTMLElement;\n\n  constructor(props?: IDropdownProps) {\n    super(props, {\n      'isDisabled': 'disabled'\n    });\n\n    this.state = {\n      id: getId('Dropdown'),\n      isOpen: false,\n      selectedIndex: this._getSelectedIndex(props.options, props.selectedKey),\n      isDisabled: props.isDisabled !== undefined ? props.isDisabled : props.disabled\n    };\n  }\n\n  public componentWillReceiveProps(newProps: IDropdownProps) {\n    this.setState({\n      selectedIndex: this._getSelectedIndex(newProps.options, newProps.selectedKey),\n      isDisabled: newProps.isDisabled !== undefined ? newProps.isDisabled : newProps.disabled\n    });\n  }\n\n  public render() {\n    let { label, options, onRenderItem = this._onRenderItem } = this.props;\n    let { id, isOpen, selectedIndex, isDisabled } = this.state;\n    let selectedOption = options[selectedIndex];\n\n    return (\n      <div ref='root'>\n        <label id={ id + '-label' } className='ms-Label' ref={ (dropdownLabel) => this._dropdownLabel = dropdownLabel } >{ label }</label>\n        <div\n          data-is-focusable={ true }\n          ref={ (c): HTMLElement => this._dropDown = c }\n          id={ id }\n          className={ css('ms-Dropdown', {\n            'is-open': isOpen, 'is-disabled': isDisabled\n          }) }\n          tabIndex={ isDisabled ? -1 : 0 }\n          onKeyDown={ this._onDropdownKeyDown }\n          onClick={ this._onDropdownClick }\n          aria-expanded={ isOpen ? 'true' : 'false' }\n          role='combobox'\n          aria-label={ label }\n          aria-activedescendant={ selectedIndex >= 0 ? (id + '-list' + selectedIndex) : (id + '-list') }\n          aria-controls={ id + '-list' }\n          >\n          <span className='ms-Dropdown-title'>{ selectedOption ? onRenderItem(selectedOption, this._onRenderItem) : '' }</span>\n          <i className='ms-Dropdown-caretDown ms-Icon ms-Icon--ChevronDown'></i>\n        </div>\n        { isOpen && (\n          <Callout\n            isBeakVisible={ false }\n            className='ms-Dropdown-callout'\n            gapSpace={ 0 }\n            doNotLayer={ false }\n            targetElement={ this._dropDown }\n            directionalHint={ DirectionalHint.bottomLeftEdge }\n            onDismiss={ this._onDismiss }\n            >\n            <FocusZone\n              ref={ fz => fz && fz.focus() }\n              direction={ FocusZoneDirection.vertical }\n              defaultActiveElement={ '#' + id + '-list' + selectedIndex }\n              >\n              <ul ref={ (c: HTMLElement) => this._optionList = c }\n                id={ id + '-list' }\n                style={ { width: this._dropDown.clientWidth - 2 } }\n                className='ms-Dropdown-items'\n                role='listbox'\n                aria-labelledby={ id + '-label' }>\n                { options.map((option, index) => (\n                  <li id={ id + '-list' + index.toString() }\n                    ref={ Dropdown.Option + index.toString() }\n                    key={ option.key }\n                    data-index={ index }\n                    data-is-focusable={ true }\n                    className={ css('ms-Dropdown-item', { 'is-selected': selectedIndex === index }) }\n                    onClick={ () => this._onItemClick(index) }\n                    onFocus={ () => this.setSelectedIndex(index) }\n                    role='option'\n                    aria-selected={ selectedIndex === index ? 'true' : 'false' }\n                    aria-label={ option.text }\n                    >\n                    { option.text }\n                  </li>\n                )) }\n              </ul>\n            </FocusZone>\n          </Callout>\n        ) }\n      </div>\n    );\n  }\n\n  public focus() {\n    if (this._dropDown && this._dropDown.tabIndex !== -1) {\n      this._dropDown.focus();\n    }\n  }\n\n  public setSelectedIndex(index: number) {\n    let { onChanged, options } = this.props;\n    let { selectedIndex } = this.state;\n\n    index = Math.max(0, Math.min(options.length - 1, index));\n\n    if (index !== selectedIndex) {\n      // Set the selected option.\n      this.setState({\n        selectedIndex: index\n      });\n\n      if (onChanged) {\n        onChanged(options[index], index);\n      }\n    }\n  }\n\n  @autobind\n  private _onRenderItem(item: IDropdownOption): JSX.Element {\n    return <span>{ item.text }</span>;\n  }\n\n  private _onItemClick(index) {\n    this.setSelectedIndex(index);\n    this.setState({\n      isOpen: false\n    });\n  }\n\n  @autobind\n  private _onDismiss() {\n    this.setState({ isOpen: false });\n  }\n\n  private _getSelectedIndex(options: IDropdownOption[], selectedKey: string | number) {\n    return findIndex(options, (option => (option.isSelected || option.selected || (selectedKey != null) && option.key === selectedKey)));\n  }\n\n  @autobind\n  private _onDropdownKeyDown(ev: React.KeyboardEvent<HTMLElement>) {\n    switch (ev.which) {\n      case KeyCodes.enter:\n        this.setState({\n          isOpen: !this.state.isOpen\n        });\n        break;\n\n      case KeyCodes.escape:\n        this.setState({\n          isOpen: false\n        });\n        break;\n\n      case KeyCodes.up:\n        this.setSelectedIndex(this.state.selectedIndex - 1);\n        break;\n\n      case KeyCodes.down:\n        this.setSelectedIndex(this.state.selectedIndex + 1);\n        break;\n\n      case KeyCodes.home:\n        this.setSelectedIndex(0);\n        break;\n\n      case KeyCodes.end:\n        this.setSelectedIndex(this.props.options.length - 1);\n        break;\n\n      default:\n        return;\n    }\n\n    ev.stopPropagation();\n    ev.preventDefault();\n  }\n\n  @autobind\n  private _onDropdownClick() {\n    let { isDisabled, isOpen } = this.state;\n    if (!isDisabled) {\n      this.setState({\n        isOpen: !isOpen\n      });\n    }\n  }\n\n}\n"],"sourceRoot":"../../../src"}